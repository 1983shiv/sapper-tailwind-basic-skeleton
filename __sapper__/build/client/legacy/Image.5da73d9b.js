import{J as r,K as t}from"./client.5dae12bc.js";var o=r((function(r,t){Object.defineProperty(t,"__esModule",{value:!0});var o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"];t.decode83=function(r){for(var t=0,n=0;n<r.length;n++){var e=r[n];t=83*t+o.indexOf(e)}return t},t.encode83=function(r,t){for(var n="",e=1;e<=t;e++){var a=Math.floor(r)/Math.pow(83,t-e)%83;n+=o[Math.floor(a)]}return n}})),n=r((function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.sRGBToLinear=function(r){var t=r/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},t.linearTosRGB=function(r){var t=Math.max(0,Math.min(1,r));return t<=.0031308?Math.round(12.92*t*255+.5):Math.round(255*(1.055*Math.pow(t,1/2.4)-.055)+.5)},t.sign=function(r){return r<0?-1:1},t.signPow=function(r,o){return t.sign(r)*Math.pow(Math.abs(r),o)}})),e=r((function(r,o){var n,e=t&&t.__extends||(n=function(r,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var o in t)t.hasOwnProperty(o)&&(r[o]=t[o])})(r,t)},function(r,t){function o(){this.constructor=r}n(r,t),r.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=function(r){function t(t){var o=r.call(this,t)||this;return o.name="ValidationError",o.message=t,o}return e(t,r),t}(Error);o.ValidationError=a})),a=r((function(r,t){Object.defineProperty(t,"__esModule",{value:!0});var a=function(r){if(!r||r.length<6)throw new e.ValidationError("The blurhash string must be at least 6 characters");var t=o.decode83(r[0]),n=Math.floor(t/9)+1,a=t%9+1;if(r.length!==4+2*a*n)throw new e.ValidationError("blurhash length mismatch: length is "+r.length+" but it should be "+(4+2*a*n))};t.isBlurhashValid=function(r){try{a(r)}catch(r){return{result:!1,errorReason:r.message}}return{result:!0}};var i=function(r){var t=r>>16,o=r>>8&255,e=255&r;return[n.sRGBToLinear(t),n.sRGBToLinear(o),n.sRGBToLinear(e)]},u=function(r,t){var o=Math.floor(r/361),e=Math.floor(r/19)%19,a=r%19;return[n.signPow((o-9)/9,2)*t,n.signPow((e-9)/9,2)*t,n.signPow((a-9)/9,2)*t]};t.default=function(r,t,e,h){a(r),h|=1;for(var s=o.decode83(r[0]),f=Math.floor(s/9)+1,l=s%9+1,c=(o.decode83(r[1])+1)/166,d=new Array(l*f),M=0;M<d.length;M++)if(0===M){var v=o.decode83(r.substring(2,6));d[M]=i(v)}else{v=o.decode83(r.substring(4+2*M,6+2*M));d[M]=u(v,c*h)}for(var p=4*t,m=new Uint8ClampedArray(p*e),w=0;w<e;w++)for(var g=0;g<t;g++){for(var _=0,P=0,y=0,b=0;b<f;b++)for(M=0;M<l;M++){var B=Math.cos(Math.PI*g*M/t)*Math.cos(Math.PI*w*b/e),R=d[M+b*l];_+=R[0]*B,P+=R[1]*B,y+=R[2]*B}var T=n.linearTosRGB(_),G=n.linearTosRGB(P),O=n.linearTosRGB(y);m[4*g+0+w*p]=T,m[4*g+1+w*p]=G,m[4*g+2+w*p]=O,m[4*g+3+w*p]=255}return m}})),i=r((function(r,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(r,t,a,i,u){if(i<1||i>9||u<1||u>9)throw new e.ValidationError("BlurHash must have between 1 and 9 components");if(t*a*4!==r.length)throw new e.ValidationError("Width and height must match the pixels array");for(var h=[],s=function(o){for(var e=function(e){var i=0==e&&0==o?1:2,u=function(r,t,o,e){for(var a=0,i=0,u=0,h=4*t,s=0;s<t;s++)for(var f=0;f<o;f++){var l=e(s,f);a+=l*n.sRGBToLinear(r[4*s+0+f*h]),i+=l*n.sRGBToLinear(r[4*s+1+f*h]),u+=l*n.sRGBToLinear(r[4*s+2+f*h])}var c=1/(t*o);return[a*c,i*c,u*c]}(r,t,a,(function(r,n){return i*Math.cos(Math.PI*e*r/t)*Math.cos(Math.PI*o*n/a)}));h.push(u)},u=0;u<i;u++)e(u)},f=0;f<u;f++)s(f);var l,c,d=h[0],M=h.slice(1),v="",p=i-1+9*(u-1);if(v+=o.encode83(p,1),M.length>0){var m=Math.max.apply(Math,M.map((function(r){return Math.max.apply(Math,r)}))),w=Math.floor(Math.max(0,Math.min(82,Math.floor(166*m-.5))));l=(w+1)/166,v+=o.encode83(w,1)}else l=1,v+=o.encode83(0,1);return v+=o.encode83((c=d,(n.linearTosRGB(c[0])<<16)+(n.linearTosRGB(c[1])<<8)+n.linearTosRGB(c[2])),4),M.forEach((function(r){v+=o.encode83(function(r,t){return 19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*n.signPow(r[0]/t,.5)+9.5))))*19+19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*n.signPow(r[1]/t,.5)+9.5))))+Math.floor(Math.max(0,Math.min(18,Math.floor(9*n.signPow(r[2]/t,.5)+9.5))))}(r,l),2)})),v}})),u=r((function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=a.default,t.isBlurhashValid=a.isBlurhashValid,t.encode=i.default,function(r){for(var o in r)t.hasOwnProperty(o)||(t[o]=r[o])}(e)}));export{u as d};
